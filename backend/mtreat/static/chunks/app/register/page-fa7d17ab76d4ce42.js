(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{3925:(e,a,r)=>{Promise.resolve().then(r.bind(r,6432))},6432:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var t=r(5155),s=r(2115),l=r(3391),n=r(7965),d=r(946),o=r(1014),i=r(7396),u=r(6046),c=r(5282),p=r(8282);function m(){let e=(0,u.useRouter)(),a=(0,c.j)(),{loading:r,error:m}=(0,l.d4)(e=>e.auth),[g,h]=(0,s.useState)(""),[v,y]=(0,s.useState)(""),[f,x]=(0,s.useState)(""),[b,j]=(0,s.useState)(""),[C,P]=(0,s.useState)(""),[w,N]=(0,s.useState)(""),[A,R]=(0,s.useState)(""),[S,E]=(0,s.useState)("");(0,s.useEffect)(()=>{_(v,f)},[v,f]);let _=(e,a)=>{e.length<6?E("Password must be at least 6 characters long."):e!==a?E("Passwords do not match."):E("")},q=async r=>{r.preventDefault();let t=parseInt(A,10);if(isNaN(t)){E("Please enter a valid phone number.");return}let s=await a((0,p.DY)({username:b,email:g,first_name:C,last_name:w,number:t,password:v}));p.DY.fulfilled.match(s)&&e.push("/login")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.l,{className:"mt-[10px] w-[400px] flex flex-col gap-8",validationBehavior:"native",onSubmit:q,children:[(0,t.jsx)("div",{className:"items-center text-[20px] font-bold uppercase",children:"Register"}),m&&(0,t.jsx)("p",{children:"object"==typeof m?"An error occurred":m}),(0,t.jsx)(d.r,{isRequired:!0,errorMessage:"Please enter a valid username",label:"Username",labelPlacement:"outside",name:"username",placeholder:"Enter your username",type:"text",value:b,onChange:e=>j(e.target.value)}),(0,t.jsx)(d.r,{isRequired:!0,errorMessage:"Please enter your First Name",label:"First Name",labelPlacement:"outside",name:"first_name",placeholder:"Enter your First Name",type:"text",value:C,onChange:e=>P(e.target.value)}),(0,t.jsx)(d.r,{isRequired:!0,errorMessage:"Please enter your Second Name",label:"Second Name",labelPlacement:"outside",name:"last_name",placeholder:"Enter your Last Name",type:"text",value:w,onChange:e=>N(e.target.value)}),(0,t.jsx)(d.r,{isRequired:!0,errorMessage:"Please enter a valid email",label:"Email",labelPlacement:"outside",name:"email",placeholder:"Enter your email",type:"email",value:g,onChange:e=>h(e.target.value)}),(0,t.jsx)(d.r,{isRequired:!0,errorMessage:"Please enter a valid phone number",label:"Number",labelPlacement:"outside",name:"phone",placeholder:"Enter your number",type:"text",value:A,onChange:e=>R(e.target.value)}),(0,t.jsx)(d.r,{isRequired:!0,errorMessage:"Please enter a valid password",label:"Password",labelPlacement:"outside",name:"password",placeholder:"Enter your password",type:"password",value:v,onChange:e=>y(e.target.value)}),(0,t.jsx)(d.r,{isRequired:!0,errorMessage:"Please confirm your password",label:"Confirm Password",labelPlacement:"outside",name:"confirmPassword",placeholder:"Confirm your password",type:"password",value:f,onChange:e=>x(e.target.value)}),(0,t.jsx)("p",{className:"text-red-500",children:S}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(o.T,{color:"primary",disabled:r,type:"submit",children:r?"Registering...":"Register"})})]}),(0,t.jsxs)("p",{className:"mt-8",children:["Already have an account?"," ",(0,t.jsx)(i.default,{className:"text-sky-500",href:"/login",children:"Login here"})]})]})}},5282:(e,a,r)=>{"use strict";r.d(a,{j:()=>t});let t=r(3391).wA},8282:(e,a,r)=>{"use strict";r.d(a,{Ay:()=>i,DY:()=>d,Lx:()=>n});var t=r(8943),s=r(2651);let l="http://127.0.0.1:8000/api",n=(0,t.zD)("auth/login",async(e,a)=>{let{rejectWithValue:r}=a;try{return(await s.A.post("".concat(l,"/login/"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){var t;return r((null===(t=e.response)||void 0===t?void 0:t.data)||"Login failed")}}),d=(0,t.zD)("auth/register",async(e,a)=>{let{rejectWithValue:r}=a;try{return(await s.A.post("".concat(l,"/register/"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){var t;return r((null===(t=e.response)||void 0===t?void 0:t.data)||"Registration failed")}}),o=(0,t.zD)("auth/update",async(e,a)=>{let{rejectWithValue:r}=a;try{return(await s.A.put("".concat(l,"/update/"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){var t;return r((null===(t=e.response)||void 0===t?void 0:t.data)||"Update failed")}}),i=(0,t.Z0)({name:"auth",initialState:{user:null,isAuthenticated:!1,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.isAuthenticated=!0}).addCase(n.rejected,(e,a)=>{e.loading=!1,e.error=a.payload||"An error occurred during login"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.isAuthenticated=!0}).addCase(d.rejected,(e,a)=>{e.loading=!1,e.error=a.payload||"An error occurred during registration"}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.loading=!1,e.user&&(e.user={...e.user,...a.payload.user})}).addCase(o.rejected,(e,a)=>{e.loading=!1,e.error=a.payload||"An error occurred during update"})}}).reducer}},e=>{var a=a=>e(e.s=a);e.O(0,[13,14,384,943,214,396,441,517,358],()=>a(3925)),_N_E=e.O()}]);