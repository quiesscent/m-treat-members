(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{8497:(e,a,r)=>{Promise.resolve().then(r.bind(r,2386))},2386:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>g});var t=r(5155),l=r(2115),d=r(3391),s=r(7965),n=r(946),i=r(1014),o=r(7396),u=r(6046),c=r(5282),p=r(8282);function g(){let e=(0,u.useRouter)(),[a,r]=(0,l.useState)(""),[g,h]=(0,l.useState)(""),m=(0,c.j)(),{loading:v,error:y}=(0,d.d4)(e=>e.auth),x=async r=>{r.preventDefault();let t=await m((0,p.Lx)({email:a,password:g}));p.Lx.fulfilled.match(t)&&(localStorage.setItem("token",t.payload.token),e.push("/dashboard"))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.l,{className:"mt-[180px] w-[400px] flex flex-col gap-8",validationBehavior:"native",onSubmit:x,children:[(0,t.jsx)("div",{className:"items-center text-[20px] font-bold uppercase",children:"Login"}),y&&(0,t.jsx)("p",{className:"text-red-500",children:y}),(0,t.jsx)(n.r,{isRequired:!0,errorMessage:"Please enter a valid email",label:"Email",labelPlacement:"outside",name:"email",placeholder:"Enter your email",type:"email",value:a,onChange:e=>r(e.target.value)}),(0,t.jsx)(n.r,{isRequired:!0,errorMessage:"Please enter a valid password",label:"Password",labelPlacement:"outside",name:"password",placeholder:"Enter your password",type:"password",value:g,onChange:e=>h(e.target.value)}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(i.T,{color:"primary",disabled:v,type:"submit",children:v?"Logging in...":"Login"})})]}),(0,t.jsxs)("p",{className:"mt-8",children:["Dont have an account? Register"," ",(0,t.jsx)(o.default,{className:"text-sky-500",href:"/register",children:"here"})]})]})}},5282:(e,a,r)=>{"use strict";r.d(a,{j:()=>t});let t=r(3391).wA},8282:(e,a,r)=>{"use strict";r.d(a,{Ay:()=>o,DY:()=>n,Lx:()=>s});var t=r(8943),l=r(2651);let d="http://127.0.0.1:8000/api",s=(0,t.zD)("auth/login",async(e,a)=>{let{rejectWithValue:r}=a;try{return(await l.A.post("".concat(d,"/login/"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){var t;return r((null===(t=e.response)||void 0===t?void 0:t.data)||"Login failed")}}),n=(0,t.zD)("auth/register",async(e,a)=>{let{rejectWithValue:r}=a;try{return(await l.A.post("".concat(d,"/register/"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){var t;return r((null===(t=e.response)||void 0===t?void 0:t.data)||"Registration failed")}}),i=(0,t.zD)("auth/update",async(e,a)=>{let{rejectWithValue:r}=a;try{return(await l.A.put("".concat(d,"/update/"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){var t;return r((null===(t=e.response)||void 0===t?void 0:t.data)||"Update failed")}}),o=(0,t.Z0)({name:"auth",initialState:{user:null,isAuthenticated:!1,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.isAuthenticated=!0}).addCase(s.rejected,(e,a)=>{e.loading=!1,e.error=a.payload||"An error occurred during login"}).addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.isAuthenticated=!0}).addCase(n.rejected,(e,a)=>{e.loading=!1,e.error=a.payload||"An error occurred during registration"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.user&&(e.user={...e.user,...a.payload.user})}).addCase(i.rejected,(e,a)=>{e.loading=!1,e.error=a.payload||"An error occurred during update"})}}).reducer}},e=>{var a=a=>e(e.s=a);e.O(0,[13,14,384,943,214,396,441,517,358],()=>a(8497)),_N_E=e.O()}]);